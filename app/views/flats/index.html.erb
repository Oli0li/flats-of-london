<%= render "shared/navbar" %>
<div class="flat-index-container">
  <h1>Find the perfect flat for your stay in London</h1>

  <div style="width: 100%; height: 600px;"
        data-controller="map"
        data-map-api-key-value="<%= ENV['MAPBOX_API_KEY'] %>"
        data-map-markers-value="<%= @markers.to_json %>"
        class="map-container"></div>

  <div class="row gy-4">
    <% @flats.each do |flat| %>
      <div class="col-4">
        <div class="card flat-card">
          <%= link_to flat_path(flat) do %>
            <img src="https://raw.githubusercontent.com/lewagon/fullstack-images/master/uikit/greece.jpg" />
            <div class="flat-card-infos">
              <div>
                <h2><%= flat.name %></h2>
                <p>Capacity: <%= "#{flat.number_of_guests} #{'guest'.pluralize(flat.number_of_guests)}" %></p>
              </div>
              <div>
                <p>Added by: <%= flat.user.name %></p>
                <h2>Â£<%= flat.price_per_night %>/night</h2>
              </div>
              <img src="https://kitt.lewagon.com/placeholder/users/krokrob" class="card-trip-user avatar-bordered" />
            </div>
          <% end %>
        </div>
      </div>
    <% end %>
  </div>

  <div class="add-property-container">
    <h4>Have a flat to rent?</h4>
    <%= link_to "Rent your property", new_flat_path, class: "btn btn-primary mt-3" %>
  </div>
</div>
